% !TEX root = test.tex
\renewcommand{\autoren}{Stephan Morongowski}
\newpage
\section{Navigation}

Wie navigiert man in der Ebene? Hier ein Beispiel fÃ¼r ein Zitat: Vgl. \cite{bildungAtmosphaere}

\subsection{Sensorik}
Zur VerfÃ¼gung stehen folgende Sensoren:
\begin{itemize}
\item Gyros in allen drei Raumachsen
\item Beschleunigungssensoren in allen drei Raumachsen
\item Inkrementalgeber der RÃ¤der
\item Ultraschallsensoren
\end{itemize}

\subsection{Inkrementalgeber}

Zur Bestimmung der Position des Roboters in einem festen Koordinatensystem kÃ¶nnen die Inkrementalgeber der Antriebsmotoren benutzt werden.
Sie liefern pro Umdrehung 1024 Impulse. Das ergibt bei einem Raddurchmesser von 8 cm eine AuflÃ¶sung von ca. 0,5 mm pro Strich.

\begin{figure}[h]  % [h] bedeutet, dass das Bild genau an dieser Stelle im Text erscheint
\centering\includegraphics[width=0.8\textwidth]{images/Kurvenkinematic.eps}
\caption{Rotation um den Momentanpol \newline (Quelle: eigene Darstellung)}
\label{kurvenkinematik}
\end{figure}

Zur Ermittlung der aktuellen Position ist in Abbildung \ref{kurvenkinematik} die Kinematik einer Kurvenfahrt dargestellt, betrachtet fÃ¼r einen gedanklich sehr kleinen Zeitabschnitt. In diesem wird angenommen, dass die Geschwindigkeiten \(v_1\) und \(v_2\) beider RÃ¤der konstant bleiben. Dies sorgt fÃ¼rdie Vereinfachung, dass der Roboter sich auf einer Kreisbahn um einen fÃ¼r die betrachtete Zeitspanne konstanten Momentanpol bewegt. Im Folgenden sind die durch den Inkrementalgeber erfassten BogenlÃ¤ngen mit arc bezeichnet.
Es gilt:
\begin{flalign}
    % durch das & Zeichen werden alle Gleichungen an diesem Punkt ausgerichtet
	arc_{R1} &  = \Delta\varphi\cdot r_{R1}
	\label{eq:bogenmaÃ_1} \\
	arc_{R2} & = \Delta\varphi\cdot r_{R2}
	\label{eq:bogenmaÃ_2} \\
	r_{R1} & = r_{R2}  + l_a
	\label{eq:achsZuMomentanpol} \\
	\Delta arcs & = arc_{R2} - arc_{R1}
	\label{eq:arcsDef}
\end{flalign}

Aus \eqref{eq:bogenmaÃ_1}, \eqref{eq:bogenmaÃ_2}, \eqref{eq:achsZuMomentanpol} und \eqref{eq:arcsDef} folgt:
% hier keine Leerzeile machen, sonst wird der Abstand ganz groÃ
\begin{flalign}
    \Delta\varphi & = \frac{1}{l_a} \cdot \Delta arcs
	\label{eq:deltaPhi}
\end{flalign}
Durch Aufsummieren von \(\Delta\varphi\) nach jeder Auswertung der Inkrementalgeber kann somit ein ungefÃ¤hrer Absolutwinkel der Roboterachse zu einem festen KS berechnet werden.

\begin{lstlisting}[language=C++, caption=deadReckonTotalPhi]
float deadReckonTotalPhi(int inkLeft, int inkRight) {
	static float totalPhi = 0.0f;
    static int fullTurns = 0;
	totalPhi = totalPhi + 1/l_a * (inkRight - inkLeft);

    // adjust for -2pi < totalPhi < +2pi
    if (totalPhi > 6.283185307) {
        totalPhi -= 6.283185307;
        fullTurns += 1;
    }
    else if (totalPhi < -6.283185307){
        totalPhi += 6.283185307;
        fullTurns -= 1;
    }
	return totalPhi;
}
\end{lstlisting}

Zur Bestimmung des Schwerpunktes in xy-Koordinaten wird die Verschiebung von
\(S_0\) zu \(S_1\) mit trigonometrischen Funktionen berechnet und anschlieÃend aufsummiert.


\newpage
